@model PatientViewModel
@inject IHashids _hashids

@{ Model.Key = @_hashids.Encode(Model.Id);}

<tr>
	<td>@Model.Name</td>
	<td>@Model.City</td>
	<td>@Model.CreatedOn</td>
	<td>
		<span class="badge @(Model.IsDeleted ? "bg-danger" : "bg-success") js-status">
			@(Model.IsDeleted ? "Deleted" : "Available")
		</span>
	</td>
	<td>
		<div class="btn-group">
			<button type="button" class="btn btn-secondary dropdown-toggle btn-sm ps-7" data-bs-toggle="dropdown" aria-expanded="false">
				Action
			</button>
			<ul class="dropdown-menu">
				<li>
					<a href="javascript:;" class="dropdown-item js-render-modal"
					   data-title="Edit Patient"
					   data-url="/Patients/Edit/@Model.Id"
					   data-update="true">
						<i class="bi bi-pencil-square"></i>
						Edit
					</a>
				</li>
				<li>
					<a asp-action="Details" asp-route-key="@Model.Key" class="dropdown-item">
						<i class="bi bi-person-badge"></i>
						Details
					</a>
				</li>
				@if (User.IsInRole(AppRoles.Admin))
				{
					<li>
						<a href="javascript:;" class="dropdown-item flex-stack px-3 js-toggle-status"
						   data-url="/Patients/ToggleStatus/@Model.Id">
							<i class="bi bi-toggles"></i>
							Toggle Status
						</a>
					</li>
				}
			</ul>
		</div>
	</td>
</tr>